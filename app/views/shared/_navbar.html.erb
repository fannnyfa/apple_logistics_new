<%#
  Modern sidebar navigation inspired by Shadcn UI
%>
<div class="hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col">
  <!-- Sidebar component -->
  <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white border-r border-slate-200 px-6 pb-4">
    <!-- Logo -->
    <div class="flex h-16 shrink-0 items-center">
      <%= link_to root_path, class: "flex items-center space-x-3" do %>
        <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900">
          <svg class="h-5 w-5 text-white" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
          </svg>
        </div>
        <div class="flex flex-col">
          <span class="text-sm font-semibold text-slate-900">Apple Logistics</span>
          <span class="text-xs text-slate-500">물류 관리 시스템</span>
        </div>
      <% end %>
    </div>
    
    <!-- Navigation -->
    <nav class="flex flex-1 flex-col">
      <ul role="list" class="flex flex-1 flex-col gap-y-7">
        <li>
          <ul role="list" class="-mx-2 space-y-1">
            <!-- Dashboard -->
            <li>
              <%= link_to root_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(root_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50" do %>
                <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                </svg>
                대시보드
              <% end %>
            </li>
            
            <!-- Collections -->
            <li>
              <%= link_to collections_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(collections_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50" do %>
                <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                </svg>
                수거 접수
              <% end %>
            </li>
            
            <!-- History -->
            <li>
              <%= link_to history_collections_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(history_collections_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50" do %>
                <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                접수 기록
              <% end %>
            </li>
            
            <!-- Admin Section -->
            <% if current_user.admin? %>
              <li>
                <%= render 'shared/components/separator' %>
              </li>
              <li>
                <div class="text-xs font-semibold leading-6 text-slate-400 px-2">관리자</div>
                <ul role="list" class="mt-2 space-y-1">
                  <li>
                    <%= link_to admin_users_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(admin_users_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50" do %>
                      <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                      </svg>
                      사용자 관리
                    <% end %>
                  </li>
                </ul>
              </li>
            <% end %>
          </ul>
        </li>
        
        <!-- User section -->
        <li class="mt-auto">
          <%= render 'shared/components/separator' %>
          <div class="mt-4">
            <div class="group -mx-2 flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold">
              <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100">
                <svg class="h-5 w-5 text-slate-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                </svg>
              </div>
              <div class="flex-1">
                <div class="text-xs text-slate-900 font-medium truncate">
                  <%= current_user.email %>
                </div>
                <div class="text-xs text-slate-500">
                  <%= current_user.admin? ? "관리자" : "일반 사용자" %>
                </div>
              </div>
            </div>
            
            
            <div class="mt-2 -mx-2">
              <%= button_to destroy_user_session_path, 
                  method: :delete,
                  class: "group w-full flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold text-slate-700 hover:text-slate-700 hover:bg-slate-50",
                  data: { confirm: "로그아웃하시겠습니까?" } do %>
                <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                </svg>
                로그아웃
              <% end %>
            </div>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</div>

<!-- Mobile menu button -->
<div class="sticky top-0 z-40 flex items-center gap-x-4 bg-white px-4 py-4 shadow-sm sm:gap-x-6 sm:px-6 lg:hidden">
  <button type="button" class="-m-2.5 p-2.5 text-slate-700 lg:hidden" onclick="toggleMobileMenu()">
    <span class="sr-only">Open sidebar</span>
    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
    </svg>
  </button>

  <div class="flex-1 text-sm font-semibold leading-6 text-slate-900">
    <%= content_for(:page_title) || "Apple Logistics" %>
  </div>
</div>

<!-- Mobile menu overlay -->
<div class="relative z-50 lg:hidden" role="dialog" aria-modal="true" id="mobile-menu" style="display: none;">
  <div class="fixed inset-0 bg-slate-900/80"></div>
  <div class="fixed inset-0 flex">
    <div class="relative mr-16 flex w-full max-w-xs flex-1">
      <div class="absolute left-full top-0 flex w-16 justify-center pt-5">
        <button type="button" class="-m-2.5 p-2.5" onclick="toggleMobileMenu()">
          <span class="sr-only">Close sidebar</span>
          <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <!-- Mobile navigation (same as desktop) -->
      <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white px-6 pb-4">
        <div class="flex h-16 shrink-0 items-center">
          <div class="flex items-center space-x-3">
            <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-900">
              <svg class="h-5 w-5 text-white" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
              </svg>
            </div>
            <div class="flex flex-col">
              <span class="text-sm font-semibold text-slate-900">Apple Logistics</span>
              <span class="text-xs text-slate-500">물류 관리 시스템</span>
            </div>
          </div>
        </div>
        
        <nav class="flex flex-1 flex-col">
          <ul role="list" class="flex flex-1 flex-col gap-y-7">
            <li>
              <ul role="list" class="-mx-2 space-y-1">
                <li>
                  <%= link_to root_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(root_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50", onclick: "toggleMobileMenu()" do %>
                    <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                    </svg>
                    대시보드
                  <% end %>
                </li>
                <li>
                  <%= link_to collections_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(collections_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50", onclick: "toggleMobileMenu()" do %>
                    <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                    </svg>
                    수거 접수
                  <% end %>
                </li>
                <li>
                  <%= link_to history_collections_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(history_collections_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50", onclick: "toggleMobileMenu()" do %>
                    <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    접수 기록
                  <% end %>
                </li>
                <% if current_user.admin? %>
                  <li>
                    <%= render 'shared/components/separator' %>
                  </li>
                  <li>
                    <div class="text-xs font-semibold leading-6 text-slate-400 px-2">관리자</div>
                    <ul role="list" class="mt-2 space-y-1">
                      <li>
                        <%= link_to admin_users_path, class: "group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold #{'bg-slate-50 text-slate-700' if current_page?(admin_users_path)} text-slate-700 hover:text-slate-700 hover:bg-slate-50", onclick: "toggleMobileMenu()" do %>
                          <svg class="h-6 w-6 shrink-0 text-slate-400 group-hover:text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                          </svg>
                          사용자 관리
                        <% end %>
                      </li>
                    </ul>
                  </li>
                <% end %>
              </ul>
            </li>
            
            <li class="mt-auto">
              <%= render 'shared/components/separator' %>
              <div class="mt-4">
                <div class="group -mx-2 flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold">
                  <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-100">
                    <svg class="h-5 w-5 text-slate-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                    </svg>
                  </div>
                  <div class="flex-1">
                    <div class="text-xs text-slate-900 font-medium truncate">
                      <%= current_user.email %>
                    </div>
                    <div class="text-xs text-slate-500">
                      <%= current_user.admin? ? "관리자" : "일반 사용자" %>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

<script>
function toggleMobileMenu() {
  const menu = document.getElementById('mobile-menu');
  if (menu.style.display === 'none') {
    menu.style.display = 'block';
  } else {
    menu.style.display = 'none';
  }
}
</script>